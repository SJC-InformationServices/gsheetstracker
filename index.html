<!DOCTYPE html>

                
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.16/af-2.2.2/b-1.5.1/b-colvis-1.5.1/b-html5-1.5.1/b-print-1.5.1/cr-1.4.1/fc-3.2.4/fh-3.1.3/kt-2.3.2/r-2.2.1/rg-1.0.2/rr-1.2.3/sc-1.4.4/sl-1.2.5/datatables.min.css"/>
 
<link rel="stylesheet" href="https://s3.amazonaws.com/sjcarchiveassets/lib/DataTables/Editor-1.7.2/css/dataTables.editor.css">
<?!= include('mainStyle.html'); ?>

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <a class="navbar-brand" target="_blank" href="https://stjoseph.com/">
                  <img src="https://s3.amazonaws.com/sjcarchiveassets/lib/images/sjc_logo.svg" alt="">
              </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                  <ul class="navbar-nav ml-auto">
                    <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown">Welcome, 
                          
                      </a>
                      <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="https://myaccount.google.com">My Account</a>
                        <a class="dropdown-item" id="authorize" href="#">Google Authorize</a>
                        <a class="dropdown-item" id="logout" href="#">Google Logout</a>
                      </div>
                    </li>
                  </ul>
                </div>
              </nav>
              
              <ul class="nav nav-tabs">
                    <li class="nav-item">
                      <a data-toggle="tab" class="nav-link active" href="#tracking">Tracking</a>
                    </li>
                    <li class="nav-item">
                      <a data-toggle="tab" class="nav-link" href="#images">Images</a>
                    </li>
                    <li class="nav-item">
                      <a data-toggle="tab" class="nav-link" href="#products">Products</a>
                    </li>
                    <li class="nav-item">
                      <a data-toggle="tab" class="nav-link" href="#offers">Offers</a>
                    </li>
                  </ul>
                  <div class="tab-content">
                        <div id="tracking" class="tab-pane active">
                            <div class="container-fluid">
                                <div class="row">
                                  <div class="col-md-4">
                                    <legend>Merch In</legend>   
                                    <form id="merchin" class="form-signin">
                                        <input type="hidden" name="request" value="tracking" />  
                                      <div class="form-label-group">
                                          <input type="text" name="upc" placeholder="upc" id="merchinupc" class="form-control form-control-sm" required="" maxlength="14"/>
                                          <label for="merchinupc">UPC</label>
                                       </div>
                                        <button type="submit" id="submit-merchin" class="btn btn-secondary btn-sm">Submit</button>
                                    </form>
                                  </div>
                                  <div class="col-md-4" class="form-signin">
                                      <legend>Merch Out</legend>
                                      <form id="merchout" class="form-signin">
                                          <input type="hidden" name="request" value="tracking" />
                                          <div class="form-label-group">
                                          <input type="text" name="upc" placeholder="upc" id="merchoutupc" class="form-control form-control-sm" required="" maxlength="14"/>
                                          <label for="merchoutupc">UPC</label>                                        
                                        </div>
                                        <button type="submit" id="submit-merchout" class="btn btn-secondary btn-sm">Submit</button>
                                      </form>
                                  </div>
                                </div>
                              </div>
                          
                          <script defer>
                            function onSuccess(obj){
                              var tbl = obj[0];
                              var id = obj[1];
                              $("#"+id).append(tbl);
                              var trackingDT = $('#TRACKINGTABLE').DataTable({
                                dom: "<'row'<'col-sm-3'B><'col-md-5'p><'col-sm-3'l>><'row'<'col-md-6'i><'col-md-4'f>><'row'<'col-md-12't>>",
                                paging:false,
                                processing:true,
                                autowidth:false,
                                deferRender: true,
                                keys:true,
                                select:{style:'single',items:'row',blurable:false},                                    
                                idSrc:"upc",
                                buttons: [
                                    "excel"
                                ]
                            });
                            }
                            var tbl =  google.script.run.withSuccessHandler(onSuccess).renderTableTemplate("TRACKING","tracking");
                            
                          </script>
                                                     
                        </div>
                        <div id="images" class="tab-pane">                               
                        
                        </div>
                        <div id="products" class="tab-pane">
                            <script defer>
                                function onSuccess(obj){
                                  var tbl = obj[0];
                                  var id = obj[1];
                                  $("#"+id).append(tbl);
                                  var trackingDT = $('#PRODUCTSTABLE').DataTable({
                                    dom: "<'row'<'col-sm-3'B><'col-md-5'p><'col-sm-3'l>><'row'<'col-md-6'i><'col-md-4'f>><'row'<'col-md-12't>>",
                                    paging:false,
                                    processing:true,
                                    autowidth:false,
                                    deferRender: true,
                                    keys:true,
                                    select:{style:'single',items:'row',blurable:false},                                    
                                    idSrc:"upc",
                                    buttons: [
                                        "excel"
                                    ]
                                });
                                }
                                var tbl =  google.script.run.withSuccessHandler(onSuccess).renderTableTemplate("PRODUCTS","products");
                                
                              </script>
                        </div>
                        <div id="offers" class="tab-pane">
                                
                                
                         </div>
                      </div>
                      <script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-3.2.1/jszip-2.5.0/dt-1.10.16/af-2.2.2/b-1.5.1/b-colvis-1.5.1/b-html5-1.5.1/b-print-1.5.1/cr-1.4.1/fc-3.2.4/fh-3.1.3/kt-2.3.2/r-2.2.1/rg-1.0.2/rr-1.2.3/sc-1.4.4/sl-1.2.5/datatables.min.js"></script>

                      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
                      
                      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
                      
                      
                      <script type="text/javascript" src="https://s3.amazonaws.com/sjcarchiveassets/lib/DataTables/Editor-1.7.2/js/dataTables.editor.min.js"></script>  
                      
                      <script type="text/javascript" defer>
                        var $merchin = $('#merchin'),
                        $merchout = $('#merchout'),
                        url = "https://script.google.com/a/stjoseph.com/macros/s/AKfycbx-uK4T9fjkJHiAgqouwqSnUXW1UVGW1XRyq9nO6RcGjNOlpomO/exec",
                        $merchinupc = $('#merchin :text'),$merchoutupc = $('#merchout :text');

                        $merchin.on('submit', function(e) {
                          e.preventDefault();
                          var t =  $(this).serialize()+"&callback=test";
                          var jqxhr = $.ajax({
                            headers:{"Content-Type": "JSONP"},
                            url: url,
                            method: "POST",
                            dataType: "JSON",
                            data: $(this).serialize()
                          }).done(function(o){
                            $merchinupc.val("");
                            $merchinupc.focus();
                          });
                        });

                        $merchout.on('submit', function(e) 
                        {
                          e.preventDefault();
                          var t =  $(this).serialize();
                          console.dir(t);
                          var jqxhr = $.ajax({
                            headers:{"Content-Type": "JSONP"},
                            url: url,
                            method: "POST",
                            dataType: "JSON",
                            data: $(this).serialize()
                          }).done(function(o){
                            $merchoutupc.val("");
                            $merchoutupc.focus();
                            
                         });
                          });
                      </script>

                




